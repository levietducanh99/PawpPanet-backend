openapi: 3.1.0
info:
  title: PawPlanet API
  description: |-
    PawPlanet - N·ªÅn t·∫£ng m·∫°ng x√£ h·ªôi cho th√∫ c∆∞ng v√† ng∆∞·ªùi y√™u ƒë·ªông v·∫≠t.
    
    H·ªá th·ªëng bao g·ªìm:
    - **Encyclopedia**: Tra c·ª©u ki·∫øn th·ª©c v·ªÅ lo√†i v·∫≠t, gi·ªëng v·∫≠t nu√¥i
    - **Pet Management**: Qu·∫£n l√Ω h·ªì s∆° th√∫ c∆∞ng, t√¨m ng∆∞·ªùi nh·∫≠n nu√¥i
    - **Social Network**: ƒêƒÉng b√†i, comment, like, theo d√µi
    - **User Management**: Qu·∫£n l√Ω t√†i kho·∫£n, h·ªì s∆° ng∆∞·ªùi d√πng
    - **Media Upload**: Upload ·∫£nh/video qua Cloudinary

  version: 1.0.0
  contact:
    email: support@pawplanet.com

servers:
  - url: http://localhost:8080/api/v1
    description: Local development server
  - url: https://pawplanet-api.herokuapp.com/api/v1
    description: Production server

tags:
  - name: auth
    description: X√°c th·ª±c v√† ph√¢n quy·ªÅn
  - name: user
    description: Qu·∫£n l√Ω ng∆∞·ªùi d√πng
  - name: pet
    description: Qu·∫£n l√Ω th√∫ c∆∞ng
  - name: media
    description: Upload v√† qu·∫£n l√Ω media (·∫£nh/video)
  - name: encyclopedia
    description: B√°ch khoa to√†n th∆∞ ƒë·ªông v·∫≠t
  - name: social
    description: M·∫°ng x√£ h·ªôi (posts, comments, likes)
  - name: notification
    description: Th√¥ng b√°o

paths:
  # ============ AUTH ============
  /auth/register:
    post:
      tags:
        - auth
      summary: ƒêƒÉng k√Ω t√†i kho·∫£n m·ªõi
      operationId: register
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: ƒêƒÉng k√Ω th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          description: D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Email ho·∫∑c username ƒë√£ t·ªìn t·∫°i
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/login:
    post:
      tags:
        - auth
      summary: ƒêƒÉng nh·∫≠p
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: ƒêƒÉng nh·∫≠p th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '401':
          description: Sai email ho·∫∑c m·∫≠t kh·∫©u
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/logout:
    post:
      tags:
        - auth
      summary: ƒêƒÉng xu·∫•t
      operationId: logout
      security:
        - bearerAuth: []
      responses:
        '200':
          description: ƒêƒÉng xu·∫•t th√†nh c√¥ng

  # ============ USER ============
  /users/profile:
    get:
      tags:
        - user
      summary: L·∫•y th√¥ng tin profile c·ªßa user hi·ªán t·∫°i
      operationId: getCurrentUserProfile
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
        '401':
          description: Ch∆∞a ƒëƒÉng nh·∫≠p
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    put:
      tags:
        - user
      summary: C·∫≠p nh·∫≠t profile
      operationId: updateUserProfile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'

  /users/profile/avatar:
    put:
      tags:
        - user
      summary: C·∫≠p nh·∫≠t avatar
      description: |-
        C·∫≠p nh·∫≠t ·∫£nh ƒë·∫°i di·ªán. 
        Y√™u c·∫ßu upload ·∫£nh tr∆∞·ªõc qua /media/sign v√† /media, sau ƒë√≥ g·ªçi API n√†y v·ªõi mediaId.
      operationId: updateUserAvatar
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - avatarMediaId
              properties:
                avatarMediaId:
                  type: integer
                  format: int64
                  description: ID c·ªßa media ƒë√£ upload
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
        '404':
          description: Media kh√¥ng t·ªìn t·∫°i
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /users/{userId}:
    get:
      tags:
        - user
      summary: Xem profile ng∆∞·ªùi d√πng kh√°c
      operationId: getUserById
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
        '404':
          description: Kh√¥ng t√¨m th·∫•y user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /users/{userId}/follow:
    post:
      tags:
        - user
      summary: Theo d√µi ng∆∞·ªùi d√πng
      operationId: followUser
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: ƒê√£ theo d√µi
        '404':
          description: Kh√¥ng t√¨m th·∫•y user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    delete:
      tags:
        - user
      summary: H·ªßy theo d√µi ng∆∞·ªùi d√πng
      operationId: unfollowUser
      security:
        - bearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: ƒê√£ h·ªßy theo d√µi

  /users/{userId}/followers:
    get:
      tags:
        - user
      summary: L·∫•y danh s√°ch followers
      operationId: getFollowers
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserListResponse'

  /users/{userId}/following:
    get:
      tags:
        - user
      summary: L·∫•y danh s√°ch ƒëang theo d√µi
      operationId: getFollowing
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserListResponse'

  # ============ MEDIA ============
  /media/sign:
    post:
      tags:
        - media
      summary: Xin ch·ªØ k√Ω ƒë·ªÉ upload media l√™n Cloudinary
      description: |-
        Tr·∫£ v·ªÅ th√¥ng tin c·∫ßn thi·∫øt ƒë·ªÉ upload tr·ª±c ti·∫øp l√™n Cloudinary.
        Frontend s·ª≠ d·ª•ng signature n√†y ƒë·ªÉ upload ·∫£nh/video.
      operationId: getUploadSignature
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignMediaRequest'
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignMediaResponse'
        '401':
          description: Ch∆∞a ƒëƒÉng nh·∫≠p
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /media:
    post:
      tags:
        - media
      summary: L∆∞u th√¥ng tin media sau khi upload th√†nh c√¥ng
      description: |-
        Sau khi upload th√†nh c√¥ng l√™n Cloudinary, g·ªçi API n√†y ƒë·ªÉ l∆∞u v√†o DB.
        Tr·∫£ v·ªÅ mediaId ƒë·ªÉ s·ª≠ d·ª•ng khi t·∫°o post, pet, ho·∫∑c update avatar.
      operationId: saveMedia
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SaveMediaRequest'
      responses:
        '201':
          description: L∆∞u th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MediaResponse'
        '400':
          description: D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /media/{mediaId}:
    delete:
      tags:
        - media
      summary: X√≥a media
      description: X√≥a media kh·ªèi DB v√† Cloudinary (n·∫øu c·∫ßn)
      operationId: deleteMedia
      security:
        - bearerAuth: []
      parameters:
        - name: mediaId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: X√≥a th√†nh c√¥ng
        '404':
          description: Kh√¥ng t√¨m th·∫•y media
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ============ PET ============
  /pets:
    get:
      tags:
        - pet
      summary: L·∫•y danh s√°ch th√∫ c∆∞ng
      operationId: getPets
      parameters:
        - name: status
          in: query
          schema:
            type: string
            enum: [owned, for_adoption]
        - name: speciesId
          in: query
          schema:
            type: integer
            format: int64
        - name: breedId
          in: query
          schema:
            type: integer
            format: int64
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PetListResponse'

    post:
      tags:
        - pet
      summary: T·∫°o h·ªì s∆° th√∫ c∆∞ng m·ªõi
      operationId: createPet
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePetRequest'
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pet'

  /pets/{petId}:
    get:
      tags:
        - pet
      summary: Xem chi ti·∫øt th√∫ c∆∞ng
      operationId: getPetById
      parameters:
        - name: petId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PetDetail'
        '404':
          description: Kh√¥ng t√¨m th·∫•y pet
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    put:
      tags:
        - pet
      summary: C·∫≠p nh·∫≠t th√¥ng tin th√∫ c∆∞ng
      operationId: updatePet
      security:
        - bearerAuth: []
      parameters:
        - name: petId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePetRequest'
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pet'

    delete:
      tags:
        - pet
      summary: X√≥a h·ªì s∆° th√∫ c∆∞ng
      operationId: deletePet
      security:
        - bearerAuth: []
      parameters:
        - name: petId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: X√≥a th√†nh c√¥ng

  /pets/{petId}/avatar:
    put:
      tags:
        - pet
      summary: C·∫≠p nh·∫≠t avatar cho th√∫ c∆∞ng
      description: |-
        Upload ·∫£nh avatar m·ªõi cho pet.
        Y√™u c·∫ßu upload ·∫£nh tr∆∞·ªõc qua /media/sign v√† /media, sau ƒë√≥ g·ªçi API n√†y.
      operationId: updatePetAvatar
      security:
        - bearerAuth: []
      parameters:
        - name: petId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - avatarMediaId
              properties:
                avatarMediaId:
                  type: integer
                  format: int64
                  description: ID c·ªßa media ƒë√£ upload
                  example: 20
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pet'
        '404':
          description: Pet ho·∫∑c Media kh√¥ng t·ªìn t·∫°i
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /pets/{petId}/media:
    post:
      tags:
        - pet
      summary: Th√™m ·∫£nh/video v√†o gallery c·ªßa th√∫ c∆∞ng
      description: |-
        Th√™m nhi·ªÅu ·∫£nh/video v√†o gallery.
        Y√™u c·∫ßu upload media tr∆∞·ªõc qua /media/sign v√† /media.
      operationId: addPetMedia
      security:
        - bearerAuth: []
      parameters:
        - name: petId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - mediaIds
              properties:
                mediaIds:
                  type: array
                  items:
                    type: integer
                    format: int64
                  description: Danh s√°ch ID c√°c media c·∫ßn th√™m
                  example: [21, 22, 23]
      responses:
        '200':
          description: Th√™m th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Pet'
        '404':
          description: Pet ho·∫∑c Media kh√¥ng t·ªìn t·∫°i
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /pets/{petId}/adoption-profile:
    get:
      tags:
        - pet
      summary: Xem h·ªì s∆° nh·∫≠n nu√¥i
      operationId: getAdoptionProfile
      parameters:
        - name: petId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdoptionProfile'
        '404':
          description: Pet kh√¥ng c√≥ h·ªì s∆° nh·∫≠n nu√¥i
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    post:
      tags:
        - pet
      summary: T·∫°o h·ªì s∆° nh·∫≠n nu√¥i
      operationId: createAdoptionProfile
      security:
        - bearerAuth: []
      parameters:
        - name: petId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAdoptionProfileRequest'
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdoptionProfile'

    put:
      tags:
        - pet
      summary: C·∫≠p nh·∫≠t h·ªì s∆° nh·∫≠n nu√¥i
      operationId: updateAdoptionProfile
      security:
        - bearerAuth: []
      parameters:
        - name: petId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAdoptionProfileRequest'
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdoptionProfile'

  /pets/{petId}/follow:
    post:
      tags:
        - pet
      summary: Theo d√µi th√∫ c∆∞ng
      operationId: followPet
      security:
        - bearerAuth: []
      parameters:
        - name: petId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: ƒê√£ theo d√µi

    delete:
      tags:
        - pet
      summary: H·ªßy theo d√µi th√∫ c∆∞ng
      operationId: unfollowPet
      security:
        - bearerAuth: []
      parameters:
        - name: petId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: ƒê√£ h·ªßy theo d√µi

  # ============ ENCYCLOPEDIA ============
  /encyclopedia/species:
    get:
      tags:
        - encyclopedia
      summary: L·∫•y danh s√°ch lo√†i
      operationId: getSpeciesList
      parameters:
        - name: classId
          in: query
          description: L·ªçc theo l·ªõp (class)
          schema:
            type: integer
            format: int64
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesListResponse'

  /encyclopedia/species/{speciesId}:
    get:
      tags:
        - encyclopedia
      summary: Chi ti·∫øt lo√†i
      operationId: getSpeciesDetail
      parameters:
        - name: speciesId
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - name: language
          in: query
          schema:
            type: string
            enum: [vi, en]
            default: vi
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesDetail'

  /encyclopedia/breeds:
    get:
      tags:
        - encyclopedia
      summary: L·∫•y danh s√°ch gi·ªëng
      operationId: getBreedsList
      parameters:
        - name: speciesId
          in: query
          description: L·ªçc theo lo√†i
          schema:
            type: integer
            format: int64
        - name: search
          in: query
          description: T√¨m ki·∫øm theo t√™n
          schema:
            type: string
        - name: taxonomyType
          in: query
          description: L·ªçc theo lo·∫°i ph√¢n lo·∫°i (breed ho·∫∑c subspecies)
          schema:
            type: string
            enum: [breed, subspecies]
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BreedListResponse'

  /encyclopedia/breeds/{breedId}:
    get:
      tags:
        - encyclopedia
      summary: Chi ti·∫øt gi·ªëng
      operationId: getBreedDetail
      parameters:
        - name: breedId
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - name: language
          in: query
          schema:
            type: string
            enum: [vi, en]
            default: vi
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BreedDetail'

  /encyclopedia/classes:
    get:
      tags:
        - encyclopedia
      summary: L·∫•y danh s√°ch l·ªõp ƒë·ªông v·∫≠t
      operationId: getClassesList
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AnimalClass'

  # ============ SOCIAL ============
  /posts:
    get:
      tags:
        - social
      summary: L·∫•y danh s√°ch b√†i vi·∫øt (feed)
      operationId: getPosts
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [normal, adoption, sale]
        - name: authorId
          in: query
          schema:
            type: integer
            format: int64
        - name: hashtags
          in: query
          description: L·ªçc theo hashtag
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListResponse'

    post:
      tags:
        - social
      summary: T·∫°o b√†i vi·∫øt m·ªõi
      operationId: createPost
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePostRequest'
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'

  /posts/{postId}:
    get:
      tags:
        - social
      summary: Xem chi ti·∫øt b√†i vi·∫øt
      operationId: getPostById
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostDetail'

    delete:
      tags:
        - social
      summary: X√≥a b√†i vi·∫øt (soft delete)
      operationId: deletePost
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: X√≥a th√†nh c√¥ng

  /posts/{postId}/like:
    post:
      tags:
        - social
      summary: Like b√†i vi·∫øt
      operationId: likePost
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: ƒê√£ like

    delete:
      tags:
        - social
      summary: Unlike b√†i vi·∫øt
      operationId: unlikePost
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: ƒê√£ unlike

  /posts/{postId}/comments:
    get:
      tags:
        - social
      summary: L·∫•y danh s√°ch comment
      operationId: getComments
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentListResponse'

    post:
      tags:
        - social
      summary: T·∫°o comment
      operationId: createComment
      security:
        - bearerAuth: []
      parameters:
        - name: postId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCommentRequest'
      responses:
        '201':
          description: T·∫°o th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Comment'

  /comments/{commentId}:
    delete:
      tags:
        - social
      summary: X√≥a comment (soft delete)
      operationId: deleteComment
      security:
        - bearerAuth: []
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: X√≥a th√†nh c√¥ng

  /comments/{commentId}/replies:
    get:
      tags:
        - social
      summary: L·∫•y danh s√°ch reply c·ªßa comment
      operationId: getCommentReplies
      parameters:
        - name: commentId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Comment'

  # ============ NOTIFICATION ============
  /notifications:
    get:
      tags:
        - notification
      summary: L·∫•y danh s√°ch th√¥ng b√°o
      operationId: getNotifications
      security:
        - bearerAuth: []
      parameters:
        - name: isRead
          in: query
          schema:
            type: boolean
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationListResponse'

  /notifications/{notificationId}/read:
    put:
      tags:
        - notification
      summary: ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc
      operationId: markNotificationAsRead
      security:
        - bearerAuth: []
      parameters:
        - name: notificationId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Th√†nh c√¥ng

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    PageParam:
      name: page
      in: query
      description: S·ªë trang (b·∫Øt ƒë·∫ßu t·ª´ 0)
      schema:
        type: integer
        default: 0
        minimum: 0

    SizeParam:
      name: size
      in: query
      description: S·ªë l∆∞·ª£ng items tr√™n 1 trang
      schema:
        type: integer
        default: 20
        minimum: 1
        maximum: 100

  schemas:
    # ============ AUTH SCHEMAS ============
    RegisterRequest:
      type: object
      required:
        - email
        - username
        - password
      properties:
        email:
          type: string
          format: email
          example: user@example.com
        username:
          type: string
          minLength: 3
          maxLength: 50
          example: johndoe
        password:
          type: string
          minLength: 6
          format: password
          example: MySecurePassword123

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          format: password

    AuthResponse:
      type: object
      properties:
        token:
          type: string
          description: JWT token
        user:
          $ref: '#/components/schemas/UserProfile'

    # ============ USER SCHEMAS ============
    UserProfile:
      type: object
      properties:
        id:
          type: integer
          format: int64
        email:
          type: string
        username:
          type: string
        role:
          type: string
          enum: [USER, ADMIN]
        avatarUrl:
          type: string
        bio:
          type: string
        isVerified:
          type: boolean
        createdAt:
          type: string
          format: date-time
        followersCount:
          type: integer
        followingCount:
          type: integer
        petsCount:
          type: integer

    UpdateProfileRequest:
      type: object
      properties:
        username:
          type: string
        avatarUrl:
          type: string
        bio:
          type: string

    # ============ MEDIA SCHEMAS ============
    SignMediaRequest:
      type: object
      required:
        - uploadType
      properties:
        uploadType:
          type: string
          enum: [avatar, post, pet, encyclopedia]
          description: Lo·∫°i upload ƒë·ªÉ x√°c ƒë·ªãnh folder v√† rule
          example: avatar
        fileType:
          type: string
          enum: [image, video]
          description: Lo·∫°i file
          example: image

    SignMediaResponse:
      type: object
      properties:
        signature:
          type: string
          description: Ch·ªØ k√Ω Cloudinary
          example: "a1b2c3d4e5f6..."
        timestamp:
          type: integer
          format: int64
          description: Timestamp cho request
          example: 1640000000
        cloudName:
          type: string
          description: Cloud name c·ªßa Cloudinary
          example: "pawplanet-cloud"
        apiKey:
          type: string
          description: API key public
          example: "123456789012345"
        folder:
          type: string
          description: Folder tr√™n Cloudinary ƒë·ªÉ upload
          example: "pawplanet/avatars"
        uploadPreset:
          type: string
          description: Upload preset (n·∫øu c√≥)
          example: "avatar_preset"

    SaveMediaRequest:
      type: object
      required:
        - publicId
        - url
        - type
      properties:
        publicId:
          type: string
          description: Public ID t·ª´ Cloudinary
          example: "pawplanet/avatars/user_123_1640000000"
        url:
          type: string
          description: URL c·ªßa media t·ª´ Cloudinary
          example: "https://res.cloudinary.com/pawplanet/image/upload/v1640000000/pawplanet/avatars/user_123.jpg"
        type:
          type: string
          enum: [image, video]
          description: Lo·∫°i media
          example: image
        width:
          type: integer
          description: Chi·ªÅu r·ªông (pixels)
          example: 1920
        height:
          type: integer
          description: Chi·ªÅu cao (pixels)
          example: 1080
        format:
          type: string
          description: ƒê·ªãnh d·∫°ng file
          example: jpg
        size:
          type: integer
          format: int64
          description: K√≠ch th∆∞·ªõc file (bytes)
          example: 524288

    MediaResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: ID c·ªßa media trong DB
          example: 42
        publicId:
          type: string
          description: Public ID tr√™n Cloudinary
          example: "pawplanet/avatars/user_123_1640000000"
        url:
          type: string
          description: URL c·ªßa media
          example: "https://res.cloudinary.com/pawplanet/image/upload/v1640000000/pawplanet/avatars/user_123.jpg"
        type:
          type: string
          enum: [image, video]
          example: image
        createdAt:
          type: string
          format: date-time
          example: "2024-12-29T10:30:00Z"

    UserListResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/UserProfile'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        size:
          type: integer
        number:
          type: integer

    # ============ PET SCHEMAS ============
    Pet:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        speciesId:
          type: integer
          format: int64
        speciesName:
          type: string
        breedId:
          type: integer
          format: int64
        breedName:
          type: string
        birthDate:
          type: string
          format: date
        gender:
          type: string
          enum: [MALE, FEMALE, UNKNOWN]
        description:
          type: string
        status:
          type: string
          enum: [owned, for_adoption]
        ownerId:
          type: integer
          format: int64
        ownerUsername:
          type: string
        media:
          type: array
          items:
            $ref: '#/components/schemas/PetMedia'

    PetDetail:
      allOf:
        - $ref: '#/components/schemas/Pet'
        - type: object
          properties:
            adoptionProfile:
              $ref: '#/components/schemas/AdoptionProfile'
            followerCount:
              type: integer
            isFollowing:
              type: boolean
              description: User hi·ªán t·∫°i c√≥ ƒëang follow pet n√†y kh√¥ng

    CreatePetRequest:
      type: object
      required:
        - name
        - speciesId
      properties:
        name:
          type: string
          example: Lucky
        speciesId:
          type: integer
          format: int64
          example: 1
        breedId:
          type: integer
          format: int64
          example: 5
        birthDate:
          type: string
          format: date
          example: "2022-03-15"
        gender:
          type: string
          enum: [MALE, FEMALE, UNKNOWN]
          example: MALE
        description:
          type: string
          example: Ch√≥ con r·∫•t ƒë√°ng y√™u v√† nƒÉng ƒë·ªông
        status:
          type: string
          enum: [owned, for_adoption]
          example: owned
        url:
            type: string
            description: URL c·ªßa avatar (n·∫øu c√≥)
            example: "https://res.cloudinary.com/pawplanet/image/upload/v1640000000/pawplanet/avatars/user_123.jpg"
#        avatarMediaId:
#          type: integer
#          format: int64
#          description: ID c·ªßa media avatar (ƒë√£ upload tr∆∞·ªõc)
#          example: 12
#        mediaIds:
#          type: array
#          items:
#            type: integer
#            format: int64
#          description: Danh s√°ch ID c√°c media trong gallery
#          example: [13, 14, 15]

    UpdatePetRequest:
      type: object
      properties:
        name:
          type: string
        breedId:
          type: integer
          format: int64
        birthDate:
          type: string
          format: date
        gender:
          type: string
        description:
          type: string
        status:
          type: string

    AdoptionProfile:
      type: object
      properties:
        petId:
          type: integer
          format: int64
        healthStatus:
          type: string
        vaccinated:
          type: boolean
        sterilized:
          type: boolean
        personality:
          type: string
        habits:
          type: string
        favoriteActivities:
          type: string
        careInstructions:
          type: string
        diet:
          type: string
        adoptionRequirements:
          type: string
        reasonForAdoption:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateAdoptionProfileRequest:
      type: object
      properties:
        healthStatus:
          type: string
        vaccinated:
          type: boolean
        sterilized:
          type: boolean
        personality:
          type: string
        habits:
          type: string
        favoriteActivities:
          type: string
        careInstructions:
          type: string
        diet:
          type: string
        adoptionRequirements:
          type: string
        reasonForAdoption:
          type: string

    UpdateAdoptionProfileRequest:
      type: object
      properties:
        healthStatus:
          type: string
        vaccinated:
          type: boolean
        sterilized:
          type: boolean
        personality:
          type: string
        habits:
          type: string
        favoriteActivities:
          type: string
        careInstructions:
          type: string
        diet:
          type: string
        adoptionRequirements:
          type: string
        reasonForAdoption:
          type: string

    PetMedia:
      type: object
      properties:
        id:
          type: integer
          format: int64
        type:
          type: string
          enum: [image, video]
        role:
          type: string
          enum: [avatar, gallery]
        url:
          type: string
        displayOrder:
          type: integer

    PetListResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Pet'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        size:
          type: integer
        number:
          type: integer

    # ============ ENCYCLOPEDIA SCHEMAS ============
    AnimalClass:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        code:
          type: string
        description:
          type: string

    Species:
      type: object
      properties:
        id:
          type: integer
          format: int64
        classId:
          type: integer
          format: int64
        className:
          type: string
        name:
          type: string
        scientificName:
          type: string
        description:
          type: string

    SpeciesDetail:
      allOf:
        - $ref: '#/components/schemas/Species'
        - type: object
          properties:
            attributes:
              type: array
              items:
                $ref: '#/components/schemas/SpeciesAttribute'
            sections:
              type: array
              items:
                $ref: '#/components/schemas/SpeciesSection'
            media:
              type: array
              items:
                $ref: '#/components/schemas/EncyclopediaMedia'

    SpeciesAttribute:
      type: object
      properties:
        id:
          type: integer
          format: int64
        key:
          type: string
          example: weight
        valueMin:
          type: number
        valueMax:
          type: number
        unit:
          type: string
          example: kg
        displayOrder:
          type: integer

    SpeciesSection:
      type: object
      properties:
        sectionCode:
          type: string
        sectionName:
          type: string
        content:
          type: string

    Breed:
      type: object
      properties:
        id:
          type: integer
          format: int64
        speciesId:
          type: integer
          format: int64
        speciesName:
          type: string
        name:
          type: string
        origin:
          type: string
        shortDescription:
          type: string
        taxonomyType:
          type: string
          enum: [breed, subspecies]
          description: Type of taxonomic classification - breed for cultivated varieties, subspecies for scientific classifications
          example: breed

    BreedDetail:
      allOf:
        - $ref: '#/components/schemas/Breed'
        - type: object
          properties:
            attributes:
              type: array
              items:
                $ref: '#/components/schemas/BreedAttribute'
            sections:
              type: array
              items:
                $ref: '#/components/schemas/BreedSection'
            media:
              type: array
              items:
                $ref: '#/components/schemas/EncyclopediaMedia'

    BreedAttribute:
      type: object
      properties:
        id:
          type: integer
          format: int64
        key:
          type: string
          example: temperament
        value:
          type: string
        displayOrder:
          type: integer

    BreedSection:
      type: object
      properties:
        sectionCode:
          type: string
        sectionName:
          type: string
        content:
          type: string
        displayOrder:
          type: integer

    EncyclopediaMedia:
      type: object
      properties:
        id:
          type: integer
          format: int64
        type:
          type: string
          enum: [image, video]
        role:
          type: string
          enum: [hero, gallery, thumbnail]
        url:
          type: string
        displayOrder:
          type: integer

    SpeciesListResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Species'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        size:
          type: integer
        number:
          type: integer

    BreedListResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Breed'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        size:
          type: integer
        number:
          type: integer

    # ============ SOCIAL SCHEMAS ============
    Post:
      type: object
      properties:
        id:
          type: integer
          format: int64
        authorId:
          type: integer
          format: int64
        authorUsername:
          type: string
        authorAvatarUrl:
          type: string
        content:
          type: string
        hashtags:
          type: string
        type:
          type: string
          enum: [normal, adoption, sale]
        contactInfo:
          type: string
        location:
          type: string
        createdAt:
          type: string
          format: date-time
        likeCount:
          type: integer
        commentCount:
          type: integer
        isLiked:
          type: boolean
          description: User hi·ªán t·∫°i ƒë√£ like hay ch∆∞a
        media:
          type: array
          items:
            $ref: '#/components/schemas/PostMedia'
        pets:
          type: array
          items:
            $ref: '#/components/schemas/Pet'

    PostDetail:
      allOf:
        - $ref: '#/components/schemas/Post'
        - type: object
          properties:
            comments:
              type: array
              items:
                $ref: '#/components/schemas/Comment'

    CreatePostRequest:
      type: object
      required:
        - content
      properties:
        content:
          type: string
          example: T√¨m ch·ªß m·ªõi cho b√© c√∫n d·ªÖ th∆∞∆°ng! üê∂
        hashtags:
          type: string
          example: "#adoption #dog #cute"
        type:
          type: string
          enum: [normal, adoption, sale]
          example: adoption
        contactInfo:
          type: string
          example: "0912345678"
        location:
          type: string
          example: "Qu·∫≠n 1, TP.HCM"
        petIds:
          type: array
          items:
            type: integer
            format: int64
          description: Danh s√°ch ID c√°c th√∫ c∆∞ng li√™n quan
          example: [5, 8]
        mediaUrls:
          type: array
          items:
            $ref: '#/components/schemas/MediaUrlRequest'
          description: Danh s√°ch URL ·∫£nh/video ƒë√£ upload
          example:
            - url: "https://res.cloudinary.com/xxx/image/upload/v123/pet1.jpg"
              type: "image"
            - url: "https://res.cloudinary.com/xxx/video/upload/v123/pet1.mp4"
              type: "video"

    UpdatePostRequest:
      type: object
      properties:
        content:
          type: string
          example: T√¨m ch·ªß m·ªõi cho b√© c√∫n d·ªÖ th∆∞∆°ng! üê∂
        hashtags:
          type: string
          example: "#adoption #dog #cute"
        type:
          type: string
          enum: [normal, adoption, sale]
          example: adoption
        contactInfo:
          type: string
          example: "0912345678"
        location:
          type: string
          example: "Qu·∫≠n 1, TP.HCM"
        petIds:
          type: array
          items:
            type: integer
            format: int64
          description: Danh s√°ch ID c√°c th√∫ c∆∞ng li√™n quan
          example: [5, 8]
        mediaUrls:
          type: array
          items:
            $ref: '#/components/schemas/MediaUrlRequest'
          description: Danh s√°ch URL ·∫£nh/video ƒë√£ upload
          example:
            - url: "https://res.cloudinary.com/xxx/image/upload/v123/pet1.jpg"
              type: "image"
            - url: "https://res.cloudinary.com/xxx/video/upload/v123/pet1.mp4"
              type: "video"

    MediaUrlRequest:
      type: object
      required:
        - url
      properties:
        url:
          type: string
          description: URL c·ªßa ·∫£nh/video ƒë√£ upload l√™n Cloudinary
          example: "https://res.cloudinary.com/xxx/image/upload/v123/pet1.jpg"
        type:
          type: string
          enum: [image, video]
          default: image
          description: Lo·∫°i media
          example: "image"

    PostMedia:
      type: object
      properties:
        id:
          type: integer
          format: int64
        type:
          type: string
          enum: [image, video]
        url:
          type: string
        displayOrder:
          type: integer

    Comment:
      type: object
      properties:
        id:
          type: integer
          format: int64
        postId:
          type: integer
          format: int64
        userId:
          type: integer
          format: int64
        username:
          type: string
        userAvatarUrl:
          type: string
        parentId:
          type: integer
          format: int64
        content:
          type: string
        createdAt:
          type: string
          format: date-time
        replyCount:
          type: integer

    CreateCommentRequest:
      type: object
      required:
        - content
      properties:
        content:
          type: string
        parentId:
          type: integer
          format: int64
          description: ID c·ªßa comment cha (n·∫øu l√† reply)

    PostListResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Post'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        size:
          type: integer
        number:
          type: integer

    CommentListResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Comment'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        size:
          type: integer
        number:
          type: integer

    # ============ NOTIFICATION SCHEMAS ============
    Notification:
      type: object
      properties:
        id:
          type: integer
          format: int64
        userId:
          type: integer
          format: int64
        type:
          type: string
          enum: [LIKE, COMMENT, FOLLOW, ADOPTION_REQUEST]
        referenceId:
          type: integer
          format: int64
          description: ID c·ªßa object li√™n quan (postId, commentId, userId, petId)
        isRead:
          type: boolean
        createdAt:
          type: string
          format: date-time
        message:
          type: string
          description: N·ªôi dung th√¥ng b√°o ƒë√£ format

    NotificationListResponse:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Notification'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        size:
          type: integer
        number:
          type: integer
        unreadCount:
          type: integer

    # ============ ERROR SCHEMA ============
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          example: INVALID_INPUT
        message:
          type: string
          example: Email ƒë√£ t·ªìn t·∫°i trong h·ªá th·ªëng
        details:
          type: object
          additionalProperties: true

